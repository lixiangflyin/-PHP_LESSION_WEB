qing.registNS("qext.Yoyo"),qing.registNS("qext.yoyo"),qext.Yoyo=function(){var a=[],b=50,c=10,d="zoom",e=50,f=5,g=6,h="",i={zoom:{open:function(a,b,c,d,e,f){var g=a.length;qing.array.each(a,function(a,h){var i=2*Math.PI/g,j=h*i,k=parseInt(c/2)+e+parseInt(d/2),l=b.left+(c-d)/2,m=b.top+(c-d)/2,n=l+k*Math.cos(j),o=m+k*Math.sin(j);a.elem.style.left=l+"px",a.elem.style.top=m+"px",a.elem.style.display="block";var p;qing.browser.ie<9?p=qani.animate(a.elem,{left:n+"px$tween:decelerate",top:o+"px$tween:decelerate"},150):(a.elem.style.opacity="0",p=qani.animate(a.elem,{opacity:0},{left:n+"px$tween:decelerate",top:o+"px$tween:decelerate",opacity:1},150)),p.on("finish",function(){f&&f()})})},hide:function(a,b,c,d,e,f){qing.array.each(a,function(a,e){var g=b.left+(c-d)/2,h=b.top+(c-d)/2,i;qing.browser.ie<9?i=qani.animate(a.elem,{left:g+"px$tween:accelerate",top:h+"px$tween:accelerate"},150):i=qani.animate(a.elem,{opacity:1},{left:g+"px$tween:accelerate",top:h+"px$tween:accelerate",opacity:0},150),i.on("finish",function(){a.elem.style.display="none",f&&f()})})}},scroll:{open:function(a,b,c,d,e,f){var g=a.length,h=500/g;qing.array.each(a,function(a,i){function j(){var j=2*Math.PI/g,k=i*j,l=parseInt(c/2)+e+parseInt(d/2),m=b.left+c+e,n=b.top+(c-d)/2,o=m+l*(Math.cos(k)-1),p=n+l*Math.sin(k);a.elem.style.left=m+"px",a.elem.style.top=n+"px",a.elem.style.display="block";var q=qani.animation({obj:a.elem,changes:[{type:"left",from:m,to:o,tween:function(a,b,c,d,e){var f=(c-d)/e;return a+(Math.cos(k*f)-1)*l}},{type:"top",from:n,to:p,tween:function(a,b,c,d,e){var f=(c-d)/e;return a+Math.sin(k*f)*l}}]},h*(i+1));q.start(),q.on("finish",function(){f&&f()})}i==g-1?j():setTimeout(function(){j()},h*(g-i-1))})},hide:function(a,b,c,d,e,f){var g=a.length,h=500/g;qing.array.each(a,function(a,i){var j=2*Math.PI/g,k=i*j,l=(g-i)*j,m=parseInt(c/2)+e+parseInt(d/2),n=b.left+c+e,o=b.top+(c-d)/2;a.elem.style.display="block";var p=qani.animation({obj:a.elem,changes:[{type:"left",to:n,tween:function(a,b,c,d,e){var f=(c-d)/e;return b+(Math.cos(k+l*f)-1)*m}},{type:"top",to:o,tween:function(a,b,c,d,e){var f=(c-d)/e;return b+Math.sin(k+l*f)*m}}]},h*(g-i));p.start(),p.on("finish",function(){a.elem.style.display="none",f&&f()})})}}};return qing.lang.createClass(function(a){this.yoyoId=qing.lang.guid(),this.size=b,this.seedSize=e,this.space=c,this.animateStyle=d,this.flagShow=!1,a&&(a.position&&this.setPosition(a.position.left,a.position.top),this.size=a.size||b,this.seedSize=a.seedSize||e,this.space=a.space||c,this.animateStyle=a.animateStyle||d),this.seeds=[]}).extend({addSeeds:function(a,b){arguments.length>1?this.seeds.concat({tpl:a,controllers:[].concat(b)}):this.seeds=this.seeds.concat(a)},build:function(){var a=this;qing.array.each(a.seeds,function(b,c){b.id=qing.lang.guid();var d=a.seedSize;b.elem=qing.dom.create("div",{id:b.id,className:"mod-yoyo-seed-item mod-user-unselect",style:"z-index:99999;display:none;position:absolute;overflow:hidden;width:"+d+"px;height:"+d+"px"}),b.elem.innerHTML=b.tpl;var e=b.controllers||[];document.body.appendChild(b.elem),qing.array.each(e,function(a,c){qing.event.on(b.elem,a.event,a.controller)})});var c=this.size||b;this.elem=qing.dom.create("div",{id:this.yoyoId,className:"yoyo-wraper mod-user-unselect",style:"z-index:99999;display:none;position:absolute;overflow:hidden;width:"+c+"px;height:"+c+"px;"}),this.elem.innerHTML=h,document.body.appendChild(this.elem)},show:function(){var a=qing.dom.getAttr(document.body,"data-layershow");if(a==="1")return;this.elem.style.display="block",this.flagShow=!0;var b=qing.dom.getPosition(this.elem);!qing.dom.hasClass(document.body,"mod-user-unselect")&&qing.dom.addClass(document.body,"mod-user-unselect"),i[this.animateStyle].open(this.seeds,b,this.size,this.seedSize,this.space)},hide:function(){if(this.flagShow){this.flagShow=!1;var a=qing.dom.getPosition(this.elem),b=this;qing.dom.hasClass(document.body,"mod-user-unselect")&&qing.dom.removeClass(document.body,"mod-user-unselect"),i[this.animateStyle].hide(this.seeds,a,this.size,this.seedSize,this.space,function(){b.elem.style.display="none"})}},setPosition:function(a,c){this.elem.style.left=parseInt(a)-parseInt(b/2)+"px",this.elem.style.top=parseInt(c)-parseInt(b/2)+"px"}})}(),qext.yoyo.init=function(a,b){var c=1e3,d=new qext.Yoyo(a),b=[].concat(b);d.addSeeds(b),d.build();var e=!1,f="mousedown",g="mouseup",h="mousemove";if(qing.platform.isIpad||qing.platform.isIphone)f="touchstart",g="touchend",h="touchemove";qing.event.on(document.body,f,function(a){var b=qing.event.getTarget(a);if(b==d.elem||qing.dom.contains(d.elem,b))return;var g=b.scrollTop||0,h=b.scrollLeft||0;for(var i=0,j=d.seeds.length;i<j;i++){var k=d.seeds[i];if(qing.dom.contains(k.elem,b))return}var l=f=="mousedown"?qing.page.getMousePosition():{x:a.touches[0].pageX,y:a.touches[0].pageY};d.hide(),e=setTimeout(function(){var c=f=="mousedown"?qing.page.getMousePosition():{x:a.touches[0].pageX,y:a.touches[0].pageY};if(c.x<l.x+5&&c.x>l.x-5&&c.y<l.y+5&&c.y>l.y-5)if(b==document.body||g==b.scrollTop&&h==b.scrollLeft){var e=c.x,i=c.y;d.setPosition(e,i),d.show()}},c)});var i=function(){e&&(clearTimeout(e),e=!1)};qing.event.on(document.body,g,i)},qing.dom.ready(function(){qext.yoyo.init({seedSize:36,space:0,size:36},[{tpl:'<a href="'+qDomain.qing+'/pub/show/createmusic" class="mod-yoyoseed-item music" title="\u53d1\u5e03\u97f3\u4e50"><div class="yoyo-seed-bg-sprite">a</div></a>'},{tpl:'<a href="'+qDomain.qing+qVisitorInfo.qingUrl+'" class="mod-yoyoseed-item fans" title="\u6211\u7684\u4e3b\u9875"><div class="yoyo-seed-bg-sprite">b</div></a>'},{tpl:'<a href="'+qDomain.qing+'/home" class="mod-yoyoseed-item home" title="\u9996\u9875"><div class="yoyo-seed-bg-sprite">c</div></a>'},{tpl:'<a href="'+qDomain.qing+'/pub/show/createtext" class="mod-yoyoseed-item text" title="\u53d1\u5e03\u6587\u5b57"><div class="yoyo-seed-bg-sprite">d</div></a>'},{tpl:'<a href="'+qDomain.qing+'/pub/show/createpic" class="mod-yoyoseed-item picture" title="\u53d1\u5e03\u56fe\u7247"><div class="yoyo-seed-bg-sprite">e</div></a>'},{tpl:'<a href="'+qDomain.qing+'/pub/show/createvideo" class="mod-yoyoseed-item video" title="\u53d1\u5e03\u89c6\u9891"><div class="yoyo-seed-bg-sprite">f</div></a>'}])});